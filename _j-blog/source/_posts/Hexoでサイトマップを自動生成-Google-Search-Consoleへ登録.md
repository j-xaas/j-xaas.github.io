---
title: Hexoでサイトマップを自動生成 ~ Google Search Consoleへ登録
date: 2020-03-10 23:23:23
tags:
- Hexo
- Sitemap
- google search console
---


## 概要
こんにちは。今回はHexoでサイトマップを自動生成してGoogleに登録するまでの手法を紹介します。  
本サイトもHexoを用いて自動生成しています。  

### 想定読者
- 静的サイトジェネレータhexoでWEBページを作成済み
    - Google検索でヒットしない状態
- サイトマップ未登録

### 基礎知識
- サイトマップとは
    - サイトにどのようなページがあるのか表す為のもの
    - 以下の二種類があります
        - HTMLサイトマップ
        - XMLサイトマップ
            - 検索エンジンが情報収集する対象となるため、SEO対策において重要    
    - hexoではプラグインを利用することでサイトマップを自動生成できます

- [Google Search Console](https://support.google.com/webmasters/answer/9128668?hl=ja&ref_topic=9128571)
    - [Serch Consoleの概要](https://support.google.com/webmasters/answer/9128668?hl=ja&ref_topic=9128571) （公式サイトより引用）
    ```
    Google Search Console は、Google 検索結果でのサイトの掲載順位を監視、管理、改善するのに役立つ Google の無料サービスです。Search Console に登録しなくても Google 検索結果にサイトが表示されるようにすることはできますが、Search Console に登録することで、Google のサイトに対する認識を理解し、改善できるようになります。
    ```
    - 生成したサイトマップをこちらに登録することで、Google検索結果に自分のWEBページが出るようになります
        - WEBページを公開したばかりの場合、登録しなければ検索結果に出ないと思われます

## 手順
- 1. Pluginの導入
- 2. _config.ymlにPluginの設定を追加
- 3. sitemap.xmlの生成
- 4. 本番環境へデプロイ
- 5. Google Search Consoleへ登録

### 1. Pluginの導入

- HEXOでサイトマップを生成できるプライグインは二種類あります
    - [hexo-generator-sitemap](https://github.com/hexojs/hexo-generator-sitemap)
    - [hexo-generator-seo-friendly-sitemap]()
        - 今回はこちらを採用

- インストール
    - HEXOディレクトリ直下で以下を実行
```
npm install hexo-generator-seo-friendly-sitemap --save
```

### 2. _config.ymlにPluginの設定を追加

- HEXOの設定ファイルに先ほどのPluginを登録します
    - ファイルはhexoディレクトリ直下にあります

- _config.ymlに追記する内容
```
## Plugins: https://hexo.io/plugins/
sitemap:
  path: sitemap.xml
  tag: false
  category: false
```

### 3. sitemap.xmlの生成
- いつも通りにhexoコマンドでジェネレートする際に、sitemapが生成されます
```
hexo g
```
- sitemap.xmlの生成を確認
    - index.htmlと
        - 通常はpublic配下

- 開いてみると、以下のように書かれています
```
<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="text/xsl" href="sitemap.xsl"?>
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">


    <sitemap>
        <loc>https://j-xaas.github.io/post-sitemap.xml</loc>
        <lastmod>2020-03-10T13:04:39.446Z</lastmod>
    </sitemap>

</sitemapindex>
<!-- XML Sitemap generated by Hexo SEO Friendly Sitemap Generator -->

```

### 4. 本番環境へデプロイ
- WEBページをホスティングしている、サーバ等へsitemap.xmlファイルをおきましょう
- github pagesを用いている場合は、Gitへpushします

### 5. Google Search Consoleへ登録

- [公式サイト](https://search.google.com/search-console)へアクセス
    - 未登録であれば、自分のWEBサイトのURLを登録しましょう

- サイドメニュー内、インデックスのサイトマップを選択

![sitemap](https://user-images.githubusercontent.com/41946222/76317221-2d197300-631f-11ea-9b4c-4c7dbb3b3d75.PNG)

- 新しいサイトマップの追加
    - 入力欄に"sitemap.xml"を入力
    - 送信

![image](https://user-images.githubusercontent.com/41946222/76317318-5df9a800-631f-11ea-8995-7722bd39ddc5.png)

- しばらく待って更新すると、以下のようにステータスが”成功しました”と表示されます
    - 以上でサイトマップの登録は完了です
        - hexo g の度に更新されるので、事後作業は特にありません

![image](https://user-images.githubusercontent.com/41946222/76319276-5687ce00-6322-11ea-98de-c4837c6f1785.png)
